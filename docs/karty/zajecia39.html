<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Karta 39 â€“ Koncentracja uwagi</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#eef4ff;
    text-align:center;
    margin:0;
    padding:20px;
}
h1{font-size:32px;}
#instruction{
    font-size:26px;
    font-weight:bold;
    margin:15px 0;
}
#target{
    font-size:48px;
    margin:15px 0;
    color:#1a73e8;
}
.controls{
    display:flex;
    justify-content:center;
    gap:10px;
    flex-wrap:wrap;
    margin-bottom:20px;
}
select,button{
    font-size:18px;
    padding:8px 14px;
    border-radius:10px;
    border:2px solid #4CAF50;
    cursor:pointer;
}
.grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:15px;
    max-width:420px;
    margin:0 auto;
}
.cell{
    background:#fff;
    border:2px solid #4CAF50;
    border-radius:12px;
    font-size:34px;
    padding:25px 0;
    cursor:pointer;
}
#info{
    font-size:22px;
    margin-top:25px;
}
.disabled{
    pointer-events:none;
    opacity:0.6;
}
</style>
</head>

<body>

<h1>Karta 39 â€“ Koncentracja uwagi</h1>

<div class="controls">
    <select id="mode">
        <option value="numbers">Cyfry</option>
        <option value="letters">Litery</option>
        <option value="syllables">Sylaby</option>
    </select>

    <select id="level">
        <option value="easy">Poziom Å‚atwy</option>
        <option value="hard">Poziom trudny</option>
    </select>

    <button id="startBtn">START</button>
    <button id="speakBtn">ðŸ”ˆ Lektor</button>
</div>

<div id="instruction">Kliknij START, aby rozpoczÄ…Ä‡.</div>
<div id="target"></div>
<div class="grid disabled" id="grid"></div>
<div id="info"></div>

<script>
let round = 0;
const maxRounds = 8;
let correctItem = "";
let locked = true;

const lettersEasy = ["A","O","E","I","U","L","M","T"];
const lettersHard = ["B","D","P","T","M","N","K","G","R","S"];

const syllablesEasy = ["MA","LA","TA","PA","BA","KO","NO","MI"];
const syllablesHard = ["BRA","KRA","SZA","PRA","TRA","GRA","STR","CHR"];

function speak(text){
    if(!('speechSynthesis' in window)) return;
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "pl-PL";
    u.rate = 0.85;
    speechSynthesis.speak(u);
}

function shuffle(arr){
    return arr.sort(()=>Math.random()-0.5);
}

function startGame(){
    round = 0;
    nextRound();
}

function nextRound(){
    if(round >= maxRounds){
        document.getElementById("grid").innerHTML="";
        document.getElementById("grid").classList.add("disabled");
        document.getElementById("target").innerHTML="";
        document.getElementById("instruction").innerHTML =
            "ðŸŽ‰ Koniec Ä‡wiczenia. Wykonano " + maxRounds + " prÃ³b.";
        speak("Koniec Ä‡wiczenia");
        return;
    }

    locked = false;
    round++;

    const mode = document.getElementById("mode").value;
    const level = document.getElementById("level").value;
    let pool = [];

    if(mode==="numbers"){
        const max = level==="easy" ? 9 : 20;
        pool = Array.from({length:max},(_,i)=>i+1);
    }
    if(mode==="letters"){
        pool = level==="easy" ? lettersEasy : lettersHard;
    }
    if(mode==="syllables"){
        pool = level==="easy" ? syllablesEasy : syllablesHard;
    }

    correctItem = pool[Math.floor(Math.random()*pool.length)];

    document.getElementById("instruction").innerHTML = "OdnajdÅº:";
    document.getElementById("target").innerHTML = correctItem;
    document.getElementById("info").innerHTML =
        "PrÃ³ba " + round + " z " + maxRounds;

    let items=[correctItem];
    while(items.length<8){
        const r=pool[Math.floor(Math.random()*pool.length)];
        if(!items.includes(r)) items.push(r);
    }

    shuffle(items);

    const grid=document.getElementById("grid");
    grid.innerHTML="";
    grid.classList.remove("disabled");

    items.forEach(el=>{
        const d=document.createElement("div");
        d.className="cell";
        d.innerText=el;
        d.onclick=()=>check(el);
        grid.appendChild(d);
    });

    speak("ZnajdÅº " + correctItem);
}

function check(val){
    if(locked) return;

    if(val===correctItem){
        locked=true;
        document.getElementById("info").innerHTML="âœ” Dobrze!";
        setTimeout(nextRound,700);
    }else{
        document.getElementById("info").innerHTML="âŒ SprÃ³buj ponownie";
    }
}

document.getElementById("startBtn").onclick=startGame;
document.getElementById("speakBtn").onclick=()=>speak("ZnajdÅº " + correctItem);

</script>

</body>
</html>
