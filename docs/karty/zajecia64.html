<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ZajÄ™cia 64 â€“ ZapamiÄ™taj pozycje</title>

<style>
:root{--accent:#00E0FF}
body{
margin:0;
font-family:system-ui;
background:#000;
color:#fff;
}

.wrap{max-width:1000px;margin:auto;padding:16px}

h1{color:var(--accent)}

.panel{
border:2px solid var(--accent);
border-radius:14px;
padding:12px;
margin:10px 0;
background:#0e0e0e;
}

.board{
display:grid;
grid-template-columns:repeat(5,1fr);
gap:10px;
margin-top:10px;
}

.cell{
border:2px dashed var(--accent);
border-radius:12px;
aspect-ratio:1/1;
font-size:2rem;
font-weight:900;
background:#000;
color:#fff;
cursor:pointer;
}

.good{outline:4px solid #0f8}
.bad{outline:4px solid #f44}

button{
padding:10px 14px;
font-weight:800;
border-radius:12px;
border:2px solid var(--accent);
background:#000;
color:#fff;
cursor:pointer;
}

.primary{
background:var(--accent);
color:#000;
}

.stats{
display:flex;
gap:20px;
margin-top:10px;
}

.instruction{
font-size:1.3rem;
color:#9ef;
margin-top:6px;
}
</style>
</head>

<body>
<main class="wrap">

<h1>ğŸ§  ZajÄ™cia 64 â€“ ZapamiÄ™taj pozycje</h1>
<button id="speak64">ğŸ”ˆ Lektor</button>

<section class="panel">

<label>Ile pÃ³l zapamiÄ™taÄ‡?</label>
<select id="n">
<option>3</option>
<option selected>4</option>
<option>5</option>
</select>

<br><br>

<button class="primary" id="start">START</button>

<div class="instruction" id="info">
NaciÅ›nij START. ZapamiÄ™taj podÅ›wietlone pola. NastÄ™pnie kliknij te same miejsca.
</div>

</section>

<section class="panel">

<div class="board" id="board"></div>

<div class="stats">
<div>âœ” Trafione: <span id="hit">0</span></div>
<div>âŒ BÅ‚Ä™dy: <span id="err">0</span></div>
</div>

</section>

</main>

<script>

let voice=true;
if(!('speechSynthesis' in window)) voice=false;

function say(txt){
 if(!voice) return;
 speechSynthesis.cancel();
 let u=new SpeechSynthesisUtterance(txt);
 u.lang='pl-PL';
 u.rate=0.9;
 speechSynthesis.speak(u);
}

const board=document.getElementById("board");

let picks=[];
let hit=0;
let err=0;
let awaiting=false;

function build(){
 board.innerHTML='';
 for(let i=0;i<20;i++){
   let b=document.createElement("button");
   b.className="cell";
   b.textContent=i+1;
   b.onclick=()=>choose(i,b);
   board.appendChild(b);
 }
}

function showSequence(){

 awaiting=false;
 picks=[];
 const k=Number(document.getElementById("n").value);

 let set=new Set();
 while(set.size<k){
   set.add(Math.floor(Math.random()*20));
 }
 picks=[...set];

 let cells=[...document.querySelectorAll(".cell")];

 let i=0;

 function flash(){
   if(i>=picks.length){
     awaiting=true;
     say("Teraz kliknij zapamiÄ™tane pola");
     return;
   }

   let c=cells[picks[i]];
   c.classList.add("good");

   setTimeout(()=>{
     c.classList.remove("good");
     i++;
     setTimeout(flash,300);
   },700);
 }

 flash();
}

function choose(i,btn){

 if(!awaiting) return;

 if(picks.includes(i)){
   hit++;
   btn.classList.add("good");
   btn.disabled=true;
   say("dobrze");

   if(hit===picks.length){
     awaiting=false;
     say("Åšwietnie! Nowa runda");
     setTimeout(startGame,1200);
   }

 } else {
   err++;
   btn.classList.add("bad");
   setTimeout(()=>btn.classList.remove("bad"),500);
   say("bÅ‚Ä…d");
 }

 document.getElementById("hit").textContent=hit;
 document.getElementById("err").textContent=err;
}

function startGame(){
 hit=0;
 err=0;
 document.getElementById("hit").textContent=0;
 document.getElementById("err").textContent=0;
 build();
 showSequence();
 say("ZapamiÄ™taj podÅ›wietlone pola");
}

document.getElementById("start").onclick=startGame;

document.getElementById("speak64").onclick=()=>{
 say("NaciÅ›nij start. ZapamiÄ™taj podÅ›wietlone pola. NastÄ™pnie kliknij te same miejsca.");
};

build();

</script>
</body>
</html>
